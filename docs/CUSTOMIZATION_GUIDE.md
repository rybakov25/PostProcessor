# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –ø–æ—Å—Ç–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞

> **–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏** ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –ø—Ä–æ—Ñ–∏–ª–∏ —Å—Ç–∞–Ω–∫–æ–≤, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –º–∞–∫—Ä–æ—Å—ã
>
> **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–æ—Å—Ç–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä** ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª—é–±–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –∏ –º–∞–∫—Ä–æ—Å–æ–≤

---

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
2. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
3. [–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞](#—Å–æ–∑–¥–∞–Ω–∏–µ-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞)
4. [–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è —Å—Ç–∞–Ω–∫–∞](#—Å–æ–∑–¥–∞–Ω–∏–µ-–ø—Ä–æ—Ñ–∏–ª—è-—Å—Ç–∞–Ω–∫–∞)
5. [–°–æ–∑–¥–∞–Ω–∏–µ Python –º–∞–∫—Ä–æ—Å–æ–≤](#—Å–æ–∑–¥–∞–Ω–∏–µ-python-–º–∞–∫—Ä–æ—Å–æ–≤)
6. [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ StateCache –≤ –º–∞–∫—Ä–æ—Å–∞—Ö](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-statecache-–≤-–º–∞–∫—Ä–æ—Å–∞—Ö)
7. [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CycleCache](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-cyclecache)
8. [–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ NumericNCWord](#—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-—á–µ—Ä–µ–∑-numericncword)
9. [–°—Ç–∏–ª—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ —á–µ—Ä–µ–∑ TextNCWord](#—Å—Ç–∏–ª—å-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤-—á–µ—Ä–µ–∑-textncword)
10. [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö-–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤)
11. [–ü—Ä–∏–º–µ—Ä—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫](#–ø—Ä–∏–º–µ—Ä—ã-–Ω–∞—Å—Ç—Ä–æ–µ–∫)
12. [–û—Ç–ª–∞–¥–∫–∞](#–æ—Ç–ª–∞–¥–∫–∞)

---

## –û–±–∑–æ—Ä (v1.1.0)

–ü–æ—Å—Ç–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–≥–∏–±–∫—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É** –¥–ª—è –ª—é–±–æ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –§–æ—Ä–º–∞—Ç |
|-----------|----------|--------|
| **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤** | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç–æ–µ–∫ –ß–ü–£ (Siemens, Fanuc, Heidenhain...) | JSON |
| **–ü—Ä–æ—Ñ–∏–ª–∏ —Å—Ç–∞–Ω–∫–æ–≤** | –°–ø–µ—Ü–∏—Ñ–∏–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Å—Ç–∞–Ω–∫–æ–≤ | JSON |
| **Python –º–∞–∫—Ä–æ—Å—ã** | –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ APT-–∫–æ–º–∞–Ω–¥ | Python |
| **StateCache** | NEW: –ö—ç—à —Å–æ—Å—Ç–æ—è–Ω–∏–π LAST_* | C# + Python |
| **CycleCache** | NEW: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–∏–∫–ª–æ–≤ | C# + Python |
| **NumericNCWord** | NEW: –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ | C# + Python |
| **TextNCWord** | NEW: –°—Ç–∏–ª—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ | C# + Python |

**–ü—Ä–∏–Ω—Ü–∏–ø –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –º–∞–∫—Ä–æ—Å–æ–≤:**
```
user/{machine}/{macro}.py  ‚Üí Highest priority (–≤–∞—à–∏ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è)
{machine}/{macro}.py       ‚Üí Medium priority (—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è —Å—Ç–∞–Ω–∫–∞)
base/{macro}.py            ‚Üí Lowest priority (–±–∞–∑–æ–≤—ã–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ)
```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
PostProcessor/
‚îú‚îÄ‚îÄ configs/
‚îÇ   ‚îú‚îÄ‚îÄ controllers/           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ siemens/           # Siemens 840D, 840D sl
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ fanuc/             # Fanuc 31i, 32i, 35i
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ heidenhain/        # Heidenhain TNC 640, 620
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ haas/              # Haas NGC
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ {your_controller}/ # –í–∞—à –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ base.json
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ machines/              # –ü—Ä–æ—Ñ–∏–ª–∏ —Å—Ç–∞–Ω–∫–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ dmu50_3axis.json   # DMG Mori 3-–æ—Å–µ–≤–æ–π
‚îÇ       ‚îú‚îÄ‚îÄ dmu50_5axis.json   # DMG Mori 5-–æ—Å–µ–≤–æ–π
‚îÇ       ‚îú‚îÄ‚îÄ nlx2500_01.json    # –¢–æ–∫–∞—Ä–Ω—ã–π Mori Seiki
‚îÇ       ‚îî‚îÄ‚îÄ {your_machine}.json # –í–∞—à —Å—Ç–∞–Ω–æ–∫
‚îÇ
‚îú‚îÄ‚îÄ macros/
‚îÇ   ‚îî‚îÄ‚îÄ python/
‚îÇ       ‚îú‚îÄ‚îÄ base/              # –ë–∞–∑–æ–≤—ã–µ –º–∞–∫—Ä–æ—Å—ã (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ)
‚îÇ       ‚îú‚îÄ‚îÄ {controller}/      # –ú–∞–∫—Ä–æ—Å—ã –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
‚îÇ       ‚îú‚îÄ‚îÄ {machine}/         # –ú–∞–∫—Ä–æ—Å—ã –¥–ª—è —Å—Ç–∞–Ω–∫–∞
‚îÇ       ‚îî‚îÄ‚îÄ user/              # –í–∞—à–∏ –º–∞–∫—Ä–æ—Å—ã (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
‚îÇ           ‚îî‚îÄ‚îÄ {machine}/     # –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–ª—è —Å—Ç–∞–Ω–∫–∞
‚îÇ
‚îî‚îÄ‚îÄ docs/
    ‚îú‚îÄ‚îÄ CUSTOMIZATION_GUIDE.md # –≠—Ç–æ—Ç —Ñ–∞–π–ª
    ‚îú‚îÄ‚îÄ PYTHON_MACROS_GUIDE.md # –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∞–∫—Ä–æ—Å–∞–º
    ‚îú‚îÄ‚îÄ QUICKSTART.md          # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
    ‚îî‚îÄ‚îÄ ARCHITECTURE.md        # –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
```

---

## –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞

### –®–∞–≥ 1: –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–ø–∏—é –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏
cp configs/controllers/siemens/840d.json configs/controllers/siemens/custom.json
```

### –®–∞–≥ 2: –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

**–ü–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ JSON:**

```json
{
  "name": "Siemens 840D Custom",
  "machineType": "Milling",
  "version": "1.0",
  
  "registerFormats": {
    "X": {
      "address": "X",
      "format": "F4.3",
      "isModal": true,
      "suppressLeadingZero": false,
      "suppressTrailingZero": true
    },
    "Y": { "address": "Y", "format": "F4.3", "isModal": true },
    "Z": { "address": "Z", "format": "F4.3", "isModal": true },
    "A": { "address": "A", "format": "F3.3", "isModal": true },
    "B": { "address": "B", "format": "F3.3", "isModal": true },
    "C": { "address": "C", "format": "F3.3", "isModal": true },
    "F": { "address": "F", "format": "F3.1", "isModal": false },
    "S": { "address": "S", "format": "F0", "isModal": false },
    "T": { "address": "T", "format": "F0", "isModal": false }
  },
  
  "functionCodes": {
    "rapid": { "code": "G00", "group": "MOTION", "isModal": true },
    "linear": { "code": "G01", "group": "MOTION", "isModal": true },
    "cw_arc": { "code": "G02", "group": "MOTION", "isModal": true },
    "ccw_arc": { "code": "G03", "group": "MOTION", "isModal": true },
    "dwell": { "code": "G04", "group": "MOTION" },
    "exact_stop": { "code": "G09", "group": "MOTION" },
    "plane_xy": { "code": "G17", "group": "PLANE" },
    "plane_xz": { "code": "G18", "group": "PLANE" },
    "plane_yz": { "code": "G19", "group": "PLANE" },
    "units_mm": { "code": "G21", "group": "UNITS" },
    "units_inch": { "code": "G20", "group": "UNITS" },
    "absolute": { "code": "G90", "group": "DISTANCE" },
    "incremental": { "code": "G91", "group": "DISTANCE" },
    "spindle_cw": { "code": "M03", "group": "SPINDLE" },
    "spindle_ccw": { "code": "M04", "group": "SPINDLE" },
    "spindle_stop": { "code": "M05", "group": "SPINDLE" },
    "coolant_flood": { "code": "M08", "group": "COOLANT" },
    "coolant_mist": { "code": "M07", "group": "COOLANT" },
    "coolant_off": { "code": "M09", "group": "COOLANT" },
    "tool_change": { "code": "M06", "group": "TOOL" }
  },
  
  "workCoordinateSystems": {
    "G54": { "offset": 1 },
    "G55": { "offset": 2 },
    "G56": { "offset": 3 },
    "G57": { "offset": 4 },
    "G58": { "offset": 5 },
    "G59": { "offset": 6 }
  },
  
  "drillingCycles": {
    "drill": { "code": "CYCLE81", "parameters": ["RTP", "RFP", "SDIS", "DP", "DPR"] },
    "peck": { "code": "CYCLE83", "parameters": ["RTP", "RFP", "SDIS", "DP", "DPR", "FDEP", "FDPR", "DAM", "DTS", "FRF", "VARI"] },
    "ream": { "code": "CYCLE85", "parameters": ["RTP", "RFP", "SDIS", "DP", "DPR", "DTB", "SDR", "FDEP", "FDPR", "DAM", "DTS", "FRF", "VARI"] }
  },
  
  "safety": {
    "clearancePlane": 100.0,
    "retractPlane": 5.0,
    "maxFeedRate": 10000.0,
    "maxSpindleSpeed": 12000.0,
    "rapidOverride": 0.5,
    "checkAxisLimits": true,
    "checkFeedRate": true,
    "checkSpindleSpeed": true
  },
  
  "multiAxis": {
    "enableRtcp": true,
    "strategy": "cartesian",
    "maxA": 120.0,
    "minA": -120.0,
    "maxB": 360.0,
    "minB": 0.0,
    "maxC": 360.0,
    "minC": 0.0,
    "rtcp": {
      "on": "RTCPON",
      "off": "RTCPOF"
    },
    "cycle800": {
      "enabled": true,
      "parameters": {
        "mode": 1,
        "table": "TABLE",
        "rotation": "ROTATION",
        "plane": "Z",
        "direction": 1,
        "feed": 5000,
        "maxFeed": 10000
      }
    }
  },
  
  "header": {
    "enabled": true,
    "lines": [
      "; Program: {inputFile}",
      "; Machine: {machine}",
      "; Date: {dateTime}",
      "; Company: {company}"
    ]
  },
  
  "footer": {
    "enabled": true,
    "lines": [
      "M30"
    ]
  },
  
  "customParameters": {
    "useCustomFeature": true,
    "feedOverride": 100.0,
    "softStart": false,
    "toolChangeHeight": 200.0
  },
  
  "customGCodes": {
    "rapidOverride": "G00.1",
    "workOffset": "G54.1P"
  },
  
  "customMCodes": {
    "toolClamp": "M10",
    "toolUnclamp": "M11",
    "palletChange": "M60"
  },
  
  "axisLimits": {
    "XMin": 0,
    "XMax": 2000,
    "YMin": 0,
    "YMax": 1000,
    "ZMin": -500,
    "ZMax": 500,
    "AMin": -120,
    "AMax": 120,
    "BMin": 0,
    "BMax": 360
  },
  
  "blockNumbering": {
    "enabled": true,
    "start": 1,
    "increment": 2,
    "prefix": "N"
  }
}
```

### –û–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–æ–≤

#### registerFormats

–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤):

| –ü–æ–ª–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|------|----------|--------|
| `address` | –ê–¥—Ä–µ—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞ | "X", "F", "S" |
| `format` | –§–æ—Ä–º–∞—Ç —á–∏—Å–ª–∞ | "F4.3" (4 —Ü–∏—Ñ—Ä—ã, 3 –ø–æ—Å–ª–µ —Ç–æ—á–∫–∏) |
| `isModal` | –ú–æ–¥–∞–ª—å–Ω–æ—Å—Ç—å | true/false |

#### functionCodes

G-–∫–æ–¥—ã –∏ M-–∫–æ–¥—ã –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞:

```json
"functionCodes": {
  "rapid": { "code": "G00" },
  "linear": { "code": "G01" },
  "spindle_cw": { "code": "M03" }
}
```

#### safety

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | Default |
|----------|----------|---------|
| `clearancePlane` | –ü–ª–æ—Å–∫–æ—Å—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ | 100.0 |
| `retractPlane` | –ü–ª–æ—Å–∫–æ—Å—Ç—å –æ—Ç–≤–æ–¥–∞ | 5.0 |
| `maxFeedRate` | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø–æ–¥–∞—á–∞ | 10000.0 |
| `maxSpindleSpeed` | –ú–∞–∫—Å. –æ–±–æ—Ä–æ—Ç—ã —à–ø–∏–Ω–¥–µ–ª—è | 12000.0 |

#### multiAxis

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã 5-–æ—Å–µ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `enableRtcp` | –í–∫–ª—é—á–∏—Ç—å RTCP (TCP) |
| `strategy` | –°—Ç—Ä–∞—Ç–µ–≥–∏—è (cartesian, joint) |
| `maxA`, `minA` | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –æ—Å–∏ A |
| `maxB`, `minB` | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –æ—Å–∏ B |

#### customParameters

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –º–∞–∫—Ä–æ—Å–æ–≤:

```json
"customParameters": {
  "softStart": true,
  "feedOverride": 120.0
}
```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –º–∞–∫—Ä–æ—Å–µ:

```python
soft_start = context.config.getParameterBool("softStart", False)
feed_override = context.config.getParameterDouble("feedOverride", 100.0)
```

---

## –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è —Å—Ç–∞–Ω–∫–∞

### –®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –ø—Ä–æ—Ñ–∏–ª—è

–°–æ–∑–¥–∞–π—Ç–µ `configs/machines/my_machine.json`:

```json
{
  "name": "My Custom Machine",
  "machineProfile": "my_machine_01",
  "controller": "siemens/840d",
  
  "axisLimits": {
    "XMin": 0,
    "XMax": 500,
    "YMin": 0,
    "YMax": 400,
    "ZMin": -300,
    "ZMax": 50,
    "AMin": -120,
    "AMax": 120,
    "BMin": 0,
    "BMax": 360
  },
  
  "head": {
    "type": "TCB6",
    "clampCommand": "M101",
    "unclampCommand": "M102"
  },
  
  "table": {
    "type": "rotary",
    "axes": ["B", "C"]
  },
  
  "fiveAxis": {
    "enableRtcp": true,
    "rtcp": {
      "on": "RTCPON",
      "off": "RTCPOF"
    },
    "cycle800": {
      "enabled": true,
      "parameters": {
        "mode": 1,
        "table": "TABLE",
        "rotation": "ROTATION",
        "plane": "Z",
        "x": 0,
        "y": 0,
        "z": 0,
        "a": 0,
        "b": 0,
        "c": 0,
        "dx": 0,
        "dy": 0,
        "dz": 0,
        "direction": 1,
        "feed": 5000,
        "maxFeed": 10000
      }
    }
  },
  
  "toolChanger": {
    "type": "manual",
    "position": {
      "X": 0,
      "Y": 0,
      "Z": 200
    },
    "clampCommand": "M10",
    "unclampCommand": "M11"
  },
  
  "customParameters": {
    "softStart": true,
    "toolChangeHeight": 200.0,
    "enableChipConveyor": false,
    "palletSystem": false
  },
  
  "customGCodes": {
    "safeRapid": "G00.1"
  },
  
  "customMCodes": {
    "toolClamp": "M10",
    "toolUnclamp": "M11",
    "chipConveyorForward": "M301",
    "chipConveyorReverse": "M302"
  }
}
```

### –û–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–æ–≤

#### axisLimits

–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –ø–æ –æ—Å—è–º:

```json
"axisLimits": {
  "XMin": 0,
  "XMax": 500,
  ...
}
```

#### head

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —à–ø–∏–Ω–¥–µ–ª—å–Ω–æ–π –≥–æ–ª–æ–≤—ã:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `type` | –¢–∏–ø –≥–æ–ª–æ–≤—ã (TCB6, VK, VO...) |
| `clampCommand` | –ö–æ–º–∞–Ω–¥–∞ –∑–∞–∂–∏–º–∞ |
| `unclampCommand` | –ö–æ–º–∞–Ω–¥–∞ —Ä–∞–∑–∂–∏–º–∞ |

#### fiveAxis

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã 5-–æ—Å–µ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `enableRtcp` | –í–∫–ª—é—á–∏—Ç—å RTCP |
| `rtcp.on/off` | –ö–æ–º–∞–Ω–¥—ã –≤–∫–ª/–≤—ã–∫–ª |
| `cycle800` | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ü–∏–∫–ª–∞ –ø–æ–≤–æ—Ä–æ—Ç–∞ |

#### toolChanger

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–º–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `type` | –¢–∏–ø (manual, automatic, turret) |
| `position` | –ü–æ–∑–∏—Ü–∏—è —Å–º–µ–Ω—ã |
| `clampCommand` | –ö–æ–º–∞–Ω–¥–∞ –∑–∞–∂–∏–º–∞ |

---

## –°–æ–∑–¥–∞–Ω–∏–µ Python –º–∞–∫—Ä–æ—Å–æ–≤

### –ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `macros/python/user/my_macro.py`:

```python
# -*- coding: ascii -*-
# MY_MACRO - –û–ø–∏—Å–∞–Ω–∏–µ –º–∞–∫—Ä–æ—Å–∞

def execute(context, command):
    """
    –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–∞–∫—Ä–æ—Å–∞
    
    Args:
        context: –û–±—ä–µ–∫—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
        command: –û–±—ä–µ–∫—Ç APT-–∫–æ–º–∞–Ω–¥—ã
    """
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
    if not command.numeric:
        return
    
    # –õ–æ–≥–∏–∫–∞ –º–∞–∫—Ä–æ—Å–∞
    value = command.numeric[0]
    context.write(f"G01 X{value:.3f}")
```

### –ü—Ä–∏–º–µ—Ä: –ö–∞—Å—Ç–æ–º–Ω—ã–π –º–∞–∫—Ä–æ—Å –ø–æ–¥–∞—á–∏

```python
# -*- coding: ascii -*-
# CUSTOM_FEED - –ü–æ–¥–∞—á–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π

def execute(context, command):
    """
    FEDRAT —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
    
    APT: FEDRAT/500
    """
    if not command.numeric:
        return
    
    feed = command.numeric[0]
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –º–∞–∫—Å–∏–º—É–º
    max_feed = context.config.safety.maxFeedRate
    if feed > max_feed:
        context.warning(f"–ü–æ–¥–∞—á–∞ {feed} –ø—Ä–µ–≤—ã—à–∞–µ—Ç –º–∞–∫—Å–∏–º—É–º {max_feed}")
        feed = max_feed
    
    context.registers.f = feed
    
    # –ú–æ–¥–∞–ª—å–Ω–æ—Å—Ç—å
    last_feed = context.globalVars.GetDouble("LAST_FEED", 0.0)
    if last_feed == feed:
        return
    
    context.globalVars.SetDouble("LAST_FEED", feed)
    context.write(f"F{feed:.1f}")
```

### –ü—Ä–∏–º–µ—Ä: –ú–∞–∫—Ä–æ—Å —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

```python
# -*- coding: ascii -*-
# SOFT_START_SPINDLE - –ú—è–≥–∫–∏–π —Å—Ç–∞—Ä—Ç —à–ø–∏–Ω–¥–µ–ª—è

def execute(context, command):
    """
    SPINDL —Å –º—è–≥–∫–∏–º —Å—Ç–∞—Ä—Ç–æ–º
    
    APT: SPINDL/ON, CLW, 1600
    """
    rpm = command.numeric[0] if command.numeric else 0
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
    soft_start = context.config.getParameterBool("softStart", False)
    
    if soft_start and rpm > 1000:
        # –°—Ç–∞—Ä—Ç –Ω–∞ –Ω–∏–∑–∫–∏—Ö –æ–±–æ—Ä–æ—Ç–∞—Ö
        context.write("M3")
        context.write(f"S{int(rpm * 0.5)}")
        context.write("G04 P1.0")  # –ü–∞—É–∑–∞ 1 —Å–µ–∫
        context.write(f"S{int(rpm)}")
    else:
        # –û–±—ã—á–Ω—ã–π —Å—Ç–∞—Ä—Ç
        context.write("M3")
        if rpm > 0:
            context.write(f"S{int(rpm)}")
```

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ StateCache –≤ –º–∞–∫—Ä–æ—Å–∞—Ö

StateCache –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞.

### –ü—Ä–∏–º–µ—Ä: –º–æ–¥–∞–ª—å–Ω–∞—è –ø–æ–¥–∞—á–∞

```python
# -*- coding: ascii -*-
def execute(context, command):
    feed = command.getNumeric(0, 0)
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ –∫—ç—à
    if context.cacheHasChanged("LAST_FEED", feed):
        context.registers.f = feed
        context.writeBlock()
        context.cacheSet("LAST_FEED", feed)
```

### –ü—Ä–∏–º–µ—Ä: –∫—ç—à –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞

```python
# -*- coding: ascii -*-
def execute(context, command):
    tool_num = command.getNumeric(0, 0)
    
    if context.cacheHasChanged("LAST_TOOL", tool_num):
        context.comment(f"Tool {tool_num}")
        context.registers.t = tool_num
        context.writeBlock()
        context.cacheSet("LAST_TOOL", tool_num)
```

### –ú–µ—Ç–æ–¥—ã StateCache

| –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|
| `cacheGet(key, default)` | –ü–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ |
| `cacheSet(key, value)` | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ |
| `cacheHasChanged(key, value)` | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ |
| `cacheGetOrSet(key, default)` | –ü–æ–ª—É—á–∏—Ç—å –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å |
| `cacheReset(key)` | –°–±—Ä–æ—Å–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ |
| `cacheResetAll()` | –°–±—Ä–æ—Å–∏—Ç—å –≤–µ—Å—å –∫—ç—à |

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CycleCache

CycleCache –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç: –ø–æ–ª–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ü–∏–∫–ª–∞ –∏–ª–∏ —Ç–æ–ª—å–∫–æ –≤—ã–∑–æ–≤.

### –ü—Ä–∏–º–µ—Ä: CYCLE800

```python
# -*- coding: ascii -*-
def execute(context, command):
    params = {
        'MODE': 1,
        'TABLE': 'TABLE1',
        'X': 100.0,
        'Y': 200.0,
        'Z': 50.0,
        'A': 0.0,
        'B': 45.0,
        'C': 0.0
    }
    
    # –£–º–Ω—ã–π –≤—ã–≤–æ–¥
    context.cycleWriteIfDifferent("CYCLE800", params)
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç

```nc
; –ü–µ—Ä–≤—ã–π –≤—ã–∑–æ–≤ (–ø–æ–ª–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ)
CYCLE800(MODE=1, TABLE="TABLE1", X=100.000, Y=200.000, Z=50.000, A=0.000, B=45.000, C=0.000)

; –í—Ç–æ—Ä–æ–π –≤—ã–∑–æ–≤ (—Ç–µ –∂–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã - —Ç–æ–ª—å–∫–æ –≤—ã–∑–æ–≤)
CYCLE800()
```

### –ú–µ—Ç–æ–¥—ã CycleCache

| –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|
| `cycleWriteIfDifferent(name, params)` | –ó–∞–ø–∏—Å–∞—Ç—å –µ—Å–ª–∏ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è |
| `cycleReset(name)` | –°–±—Ä–æ—Å–∏—Ç—å –∫—ç—à |
| `cycleGetCache(name)` | –ü–æ–ª—É—á–∏—Ç—å –∫—ç—à |

---

## –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ NumericNCWord

NumericNCWord –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑ JSON-–∫–æ–Ω—Ñ–∏–≥–∞.

### –ü—Ä–∏–º–µ—Ä: —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã

```python
# -*- coding: ascii -*-
def execute(context, command):
    x = command.getNumeric(0, 0)
    
    # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
    context.setNumericValue('X', x)
    
    # –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
    xStr = context.getFormattedValue('X')  # "X100.500"
    
    context.writeBlock()
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```json
{
  "formatting": {
    "coordinates": {
      "decimals": 3,
      "leadingZeros": true,
      "trailingZeros": false
    },
    "feedrate": {
      "decimals": 1,
      "prefix": "F"
    }
  }
}
```

---

## –°—Ç–∏–ª—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ —á–µ—Ä–µ–∑ TextNCWord

TextNCWord –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–æ —Å—Ç–∏–ª–µ–º –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞.

### –ü—Ä–∏–º–µ—Ä

```python
# -*- coding: ascii -*-
def execute(context, command):
    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∏–ª—å –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
    context.comment("–ù–∞—á–∞–ª–æ –æ–ø–µ—Ä–∞—Ü–∏–∏")
    
    # Siemens: (–ù–∞—á–∞–ª–æ –æ–ø–µ—Ä–∞—Ü–∏–∏)
    # Haas: ; –ù–∞—á–∞–ª–æ –æ–ø–µ—Ä–∞—Ü–∏–∏
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å—Ç–∏–ª—è

```json
{
  "formatting": {
    "comments": {
      "type": "parentheses",  // parentheses | semicolon | both
      "maxLength": 128,
      "transliterate": false
    }
  }
}
```

### –°—Ç–∏–ª–∏

| –°—Ç–∏–ª—å | type | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|-------|------|-----------|
| Parentheses | `"parentheses"` | `(Comment)` |
| Semicolon | `"semicolon"` | `; Comment` |
| Both | `"both"` | `(Comment) ; Comment` |

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### –í –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```json
{
  "customParameters": {
    "enableHighSpeedMode": true,
    "maxRapidOverride": 120,
    "toolChangeDelay": 2.5,
    "coolantType": "flood",
    "customMessage": "Hello from config"
  }
}
```

### –í –º–∞–∫—Ä–æ—Å–µ

```python
# –ë—É–ª–µ–≤—ã –∑–Ω–∞—á–µ–Ω–∏—è
high_speed = context.config.getParameterBool("enableHighSpeedMode", False)

# –ß–∏—Å–ª–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
rapid_override = context.config.getParameterDouble("maxRapidOverride", 100.0)
delay = context.config.getParameterDouble("toolChangeDelay", 1.0)

# –°—Ç—Ä–æ–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
coolant_type = context.config.getParameterString("coolantType", "flood")
message = context.config.getParameterString("customMessage", "")

# –õ—é–±—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
value = context.config.getParameter("enableHighSpeedMode", False)
```

---

## –ü—Ä–∏–º–µ—Ä—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫

### Fanuc —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ —Ü–∏–∫–ª–∞–º–∏

```json
{
  "name": "Fanuc 31i-B5",
  "customParameters": {
    "useHighSpeedPecking": true,
    "peckDepth": 2.5,
    "retractAmount": 1.0,
    "chipBreak": true
  },
  "customGCodes": {
    "highSpeedPeck": "G73",
    "deepHolePeck": "G83",
    "fineBoring": "G76"
  },
  "customMCodes": {
    "throughSpindleCoolant": "M88",
    "airBlast": "M89"
  }
}
```

### Siemens —Å 5-–æ—Å–µ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∏ CycleCache

```json
{
  "name": "Siemens 840D sl",
  "multiAxis": {
    "enableRtcp": true,
    "strategy": "tcp",
    "maxA": 120,
    "minA": -120,
    "maxB": 360,
    "minB": 0
  },
  "customParameters": {
    "enable3DCompensation": true,
    "tiltingAxis": "B",
    "useCycle800": true,
    "safeRetractHeight": 100.0
  },
  "formatting": {
    "coordinates": {
      "decimals": 3,
      "leadingZeros": true,
      "trailingZeros": false
    },
    "feedrate": {
      "decimals": 1,
      "prefix": "F"
    },
    "comments": {
      "type": "parentheses",
      "maxLength": 128,
      "transliterate": false
    }
  }
}
```

**–ü—Ä–∏–º–µ—Ä –º–∞–∫—Ä–æ—Å–∞ —Å CycleCache:**

```python
# -*- coding: ascii -*-
# CYCLE800_MACRO - –ü–æ–≤–æ—Ä–æ—Ç –ø–ª–æ—Å–∫–æ—Å—Ç–∏ —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º

def execute(context, command):
    """
    CYCLE800 —Å —É–º–Ω—ã–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
    
    APT: 5AXIS/ROTATE, B45, C0
    """
    params = {
        'MODE': context.config.getParameterInt("cycle800Mode", 1),
        'TABLE': context.config.getParameterString("cycle800Table", "TABLE"),
        'B': command.getNumeric(0, 0.0),
        'C': command.getNumeric(1, 0.0)
    }
    
    # –£–º–Ω—ã–π –≤—ã–≤–æ–¥: –ø–æ–ª–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–ª–∏ —Ç–æ–ª—å–∫–æ –≤—ã–∑–æ–≤
    context.cycleWriteIfDifferent("CYCLE800", params)
```

### Heidenhain —Å —Ü–∏–∫–ª–∞–º–∏ –∏ StateCache

```json
{
  "name": "Heidenhain TNC640",
  "customParameters": {
    "useCycles": true,
    "cycle200": true,
    "cycle208": true,
    "m128Enabled": true
  },
  "customGCodes": {
    "plane": "PLANE",
    "cycle": "CYCL DEF"
  },
  "formatting": {
    "coordinates": {
      "decimals": 3,
      "leadingZeros": false,
      "trailingZeros": true
    },
    "comments": {
      "type": "semicolon",
      "maxLength": 80
    }
  }
}
```

**–ü—Ä–∏–º–µ—Ä –º–∞–∫—Ä–æ—Å–∞ —Å StateCache:**

```python
# -*- coding: ascii -*-
# TOOL_CHANGE_MACRO - –°–º–µ–Ω–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ —Å –∫—ç—à–µ–º

def execute(context, command):
    """
    TURRET —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
    
    APT: TURRET/5
    """
    tool_num = command.getNumeric(0, 0)
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ StateCache
    if context.cacheHasChanged("LAST_TOOL", tool_num):
        context.comment(f"Tool {tool_num}")
        context.registers.t = tool_num
        context.writeBlock()
        
        # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫—ç—à
        context.cacheSet("LAST_TOOL", tool_num)
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å NumericNCWord –∏ TextNCWord

```json
{
  "name": "Custom Controller with Formatting",
  "formatting": {
    "coordinates": {
      "decimals": 3,
      "leadingZeros": true,
      "trailingZeros": false,
      "prefix": ""
    },
    "feedrate": {
      "decimals": 0,
      "prefix": "F"
    },
    "spindle": {
      "decimals": 0,
      "prefix": "S"
    },
    "comments": {
      "type": "parentheses",
      "maxLength": 128,
      "transliterate": true,
      "encodeSpecialChars": true
    }
  }
}
```

**–ü—Ä–∏–º–µ—Ä –º–∞–∫—Ä–æ—Å–∞ —Å NumericNCWord:**

```python
# -*- coding: ascii -*-
# LINEAR_MOVE_MACRO - –õ–∏–Ω–µ–π–Ω–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º

def execute(context, command):
    """
    GO/TO —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
    
    APT: GO/TO, 100.5, 200.3, 50.0
    """
    # –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
    x = command.getNumeric(0, 0.0)
    y = command.getNumeric(1, 0.0)
    z = command.getNumeric(2, 0.0)
    
    # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
    context.setNumericValue('X', x)
    context.setNumericValue('Y', y)
    context.setNumericValue('Z', z)
    
    # –ó–∞–ø–∏—Å—å –±–ª–æ–∫–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
    context.writeBlock()
```

**–ü—Ä–∏–º–µ—Ä –º–∞–∫—Ä–æ—Å–∞ —Å TextNCWord:**

```python
# -*- coding: ascii -*-
# COMMENT_MACRO - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–æ —Å—Ç–∏–ª–µ–º

def execute(context, command):
    """
    REMARK —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Å—Ç–∏–ª–µ–º –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
    
    APT: REMARK/–ù–∞—á–∞–ª–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏
    """
    text = command.getText(0, "")
    
    # –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∏–ª—å –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞:
    # - Siemens: (–ù–∞—á–∞–ª–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏)
    # - Haas: ; –ù–∞—á–∞–ª–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏
    context.comment(text)
    
    context.writeBlock()
```

### –ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä: 5-–æ—Å–µ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º

```json
{
  "name": "DMG Mori DMU50 - Siemens 840D",
  "controller": "siemens/840d",
  "machineProfile": "dmu50_5axis",
  
  "formatting": {
    "coordinates": {
      "decimals": 3,
      "leadingZeros": true,
      "trailingZeros": false
    },
    "feedrate": {
      "decimals": 1,
      "prefix": "F"
    },
    "spindle": {
      "decimals": 0,
      "prefix": "S"
    },
    "comments": {
      "type": "parentheses",
      "maxLength": 128
    }
  },
  
  "multiAxis": {
    "enableRtcp": true,
    "strategy": "cartesian",
    "rtcp": {
      "on": "RTCPON",
      "off": "RTCPOF"
    },
    "cycle800": {
      "enabled": true,
      "parameters": {
        "mode": 1,
        "table": "TABLE",
        "rotation": "ROTATION"
      }
    }
  },
  
  "customParameters": {
    "useStateCache": true,
    "useCycleCache": true,
    "safeRetractHeight": 100.0,
    "toolChangeHeight": 200.0
  }
}
```

**–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –º–∞–∫—Ä–æ—Å —Å StateCache + CycleCache + NumericNCWord:**

```python
# -*- coding: ascii -*-
# FIVE_AXIS_MACRO - 5-–æ—Å–µ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å –ø–æ–ª–Ω—ã–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º

def execute(context, command):
    """
    5AXIS/FEDRAT —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ø–æ–¥–∞—á–∏ –∏ —Ü–∏–∫–ª–∞
    
    APT: 5AXIS/FEDRAT, 5000, B45, C0
    """
    # –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
    feed = command.getNumeric(0, 5000)
    b_angle = command.getNumeric(1, 0.0)
    c_angle = command.getNumeric(2, 0.0)
    
    # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∞—á–∏ —á–µ—Ä–µ–∑ StateCache
    if context.cacheHasChanged("LAST_FEED", feed):
        context.setNumericValue('F', feed)
        context.cacheSet("LAST_FEED", feed)
    
    # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ü–∏–∫–ª–∞ –ø–æ–≤–æ—Ä–æ—Ç–∞
    cycle_params = {
        'MODE': 1,
        'B': b_angle,
        'C': c_angle
    }
    
    # –£–º–Ω—ã–π –≤—ã–≤–æ–¥ —Ü–∏–∫–ª–∞ —á–µ—Ä–µ–∑ CycleCache
    context.cycleWriteIfDifferent("CYCLE800", cycle_params)
    
    # –ó–∞–ø–∏—Å—å –±–ª–æ–∫–∞ —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º NumericNCWord
    context.writeBlock()
```

---

## –û—Ç–ª–∞–¥–∫–∞

### –ó–∞–ø—É—Å–∫ —Å debug-—Ñ–ª–∞–≥–æ–º

```bash
dotnet run -- -i input.apt -o output.nc -c siemens --debug
```

### –í—ã–≤–æ–¥ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –º–∞–∫—Ä–æ—Å–µ

```python
def execute(context, command):
    context.comment(f"DEBUG: majorWord={command.majorWord}")
    context.comment(f"DEBUG: numeric={command.numeric}")
    context.comment(f"DEBUG: minorWords={command.minorWords}")
    context.comment(f"DEBUG: registers.x={context.registers.x}")
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```python
def execute(context, command):
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    context.comment(f"Controller: {context.config.name}")
    context.comment(f"Machine: {context.config.machineProfile}")
    context.comment(f"Safe Z: {context.config.safety.retractPlane}")
    context.comment(f"Max Feed: {context.config.safety.maxFeedRate}")
```

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [PYTHON_MACROS_GUIDE.md](PYTHON_MACROS_GUIDE.md) ‚Äî –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∞–∫—Ä–æ—Å–∞–º
- [QUICKSTART.md](QUICKSTART.md) ‚Äî –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- [ARCHITECTURE.md](ARCHITECTURE.md) ‚Äî –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ—Å—Ç–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
